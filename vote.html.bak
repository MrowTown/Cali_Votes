<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cali Votes — Vote</title>
  <link rel="stylesheet" href="style.css" />
  <script src="config.js"></script>
  <script src="app.js"></script>
  <style>
    .wrap { max-width: 900px; margin: 24px auto; padding: 0 14px; }
    .topbar { display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; margin-bottom: 14px; }
    .pill { padding: 6px 10px; border-radius: 999px; background: rgba(0,0,0,.08); font-size: 13px; }
    .btn { display:inline-block; padding:10px 14px; border-radius: 14px; border: 0; cursor:pointer; font-weight: 800; }
    .btn-danger { background:#ff245a; color:#fff; }
    .btn-secondary { background:#111; color:#fff; border:1px solid rgba(0,0,0,.18); }
    .card { padding: 16px; border-radius: 16px; background: rgba(0,0,0,.06); }
    .msg { margin-top:12px; padding:10px 12px; border-radius:12px; display:none; }
    .err { background: rgba(255,0,80,.12); border: 1px solid rgba(255,0,80,.25); }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="pill">Verified as: <span id="who">—</span></div>
      <div style="display:flex; gap:10px; align-items:center;">
        <button id="btnBack" class="btn btn-secondary">Back</button>
        <button id="btnSwitch" class="btn btn-danger">Switch email</button>
      </div>
    </div>

    <div id="msgErr" class="msg err"></div>

    <div class="card">
      <h1>Choose your votes</h1>
      <p class="muted">Pick your city, number of votes, and payment method.</p>

      <!-- YOUR existing voting UI goes here.
           If your current file already has it, paste it and I’ll merge this bar in. -->
      <p><i>Replace this block with your current vote form UI.</i></p>
    </div>
  </div>

  <script>
    const msgErr = document.getElementById("msgErr");
    const who = document.getElementById("who");
    const btnSwitch = document.getElementById("btnSwitch");
    const btnBack = document.getElementById("btnBack");

    function showErr(html){
      msgErr.innerHTML = html;
      msgErr.style.display = "block";
    }

    (function boot(){
      const s = getSession();
      if (!s.session || !s.email) {
        // If not logged in, force login
        window.location.href = "landing.html";
        return;
      }
      who.textContent = s.email;
    })();

    btnBack.addEventListener("click", () => {
      window.location.href = "landing.html";
    });

    btnSwitch.addEventListener("click", () => {
      clearSession();
      window.location.href = "register.html";
    });
  </script>
</body>
</html>
