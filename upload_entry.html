<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cali Votes — Upload Proof</title>
  <link rel="stylesheet" href="style.css" />
  <script src="config.js"></script>
  <script src="app.js"></script>
</head>
<body>
  <div id="sessionBanner"></div>

  <div class="wrap">
    <div class="card">
      <h1>Upload proof</h1>
      <p>If you already paid earlier, we still need to tie your payment to your email + vote details.</p>

      <div class="notice">
        <p class="small" style="margin:0">
          Start by voting normally (it takes ~30 seconds), then you’ll get the upload screen.
        </p>
      </div>

      <div id="pendingUpload" class="notice" style="display:none; margin-top:12px;">
        <p class="small" style="margin:0">We found your latest upload link. You can continue straight to upload.</p>
      </div>

      <div class="row" style="margin-top:14px">
        <button id="go">Go to vote</button>
        <button class="secondary" id="home">Home</button>
      </div>
    </div>
  </div>
<script>
  const goBtn = document.getElementById("go");
  const pending = document.getElementById("pendingUpload");
  const lastUploadUrl = localStorage.getItem("cali_last_upload_url") || "";

  if (lastUploadUrl) {
    pending.style.display = "block";
    goBtn.textContent = "Go to upload";
    goBtn.onclick = () => { location.href = lastUploadUrl; };
  } else {
    goBtn.onclick = () => {
      const s = getSession();
      location.href = s.session_token ? "vote.html" : "register.html";
    };
  }

  document.getElementById("home").onclick = () => location.href = "landing.html";
</script>
  <script>mountSessionBanner();</script>
</body>
</html>
